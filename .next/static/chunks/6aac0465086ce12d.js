(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,t.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),s=({className:e="w-5 h-5"})=>(0,t.jsx)("div",{className:`${e} border-2 border-t-purple-400 border-r-purple-400 border-b-transparent border-l-transparent rounded-full animate-spin`}),l=({onAddWatch:e,onClose:l})=>{let[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,b]=(0,r.useState)("1"),[y,f]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null),j=async t=>{var r,a,s,l;let y,w,j,N,k,S,C;t.preventDefault();let P=(y=[],(w=(a=(r={eventName:n,venueName:i,venueLocation:c,date:m,targetPrice:h,numTickets:p}).eventName)&&0!==a.trim().length?a.trim().length<3?"Event name must be at least 3 characters":a.length>200?"Event name must be less than 200 characters":null:"Event name is required")&&y.push(w),(j=(s=r.venueName)&&0!==s.trim().length?s.trim().length<2?"Venue name must be at least 2 characters":null:"Venue name is required")&&y.push(j),(N=(l=r.venueLocation)&&0!==l.trim().length?l.trim().length<2?"Venue location must be at least 2 characters":null:"Venue location is required")&&y.push(N),(k=(e=>{if(!e)return"Date is required";let t=new Date(e),r=new Date;if(r.setHours(0,0,0,0),isNaN(t.getTime()))return"Invalid date format";if(t<r)return"Date must be in the future";let a=new Date;return(a.setFullYear(a.getFullYear()+5),t>a)?"Date must be within the next 5 years":null})(r.date))&&y.push(k),(S=(e=>{if(!e||0===e.trim().length)return"Target price is required";let t=parseFloat(e);return isNaN(t)?"Target price must be a valid number":t<=0?"Target price must be greater than 0":t>1e5?"Target price seems unreasonably high. Please enter a value less than $100,000":null})(r.targetPrice))&&y.push(S),(C=(e=>{if(!e||0===e.trim().length)return"Number of tickets is required";let t=parseInt(e,10);return isNaN(t)?"Number of tickets must be a valid number":t<1?"Number of tickets must be at least 1":t>50?"Number of tickets cannot exceed 50":null})(r.numTickets))&&y.push(C),{isValid:0===y.length,errors:y});if(!P.isValid)return void v(P.errors.join(". "));v(null),f(!0);try{await e({eventName:n.trim(),venueName:i.trim(),venueLocation:c.trim(),date:m,targetPrice:parseFloat(h),numTickets:parseInt(p,10)}),o(""),d(""),u(""),x(""),g(""),b("1")}catch(e){v(e instanceof Error?e.message:"An unknown error occurred."),f(!1)}};return(0,t.jsxs)("div",{className:"relative max-w-2xl w-full mx-auto bg-gray-800 p-6 sm:p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-1",children:"Add New Watch"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"Enter event details to start tracking."}),(0,t.jsxs)("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"eventName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Event Name"}),(0,t.jsx)("input",{type:"text",id:"eventName",value:n,onChange:e=>o(e.target.value),placeholder:"e.g., Taylor Swift: The Eras Tour",className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"venueName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Venue"}),(0,t.jsx)("input",{type:"text",id:"venueName",value:i,onChange:e=>d(e.target.value),placeholder:"e.g., SoFi Stadium",className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"venueLocation",className:"block text-sm font-medium text-gray-300 mb-1",children:"Venue Location"}),(0,t.jsx)("input",{type:"text",id:"venueLocation",value:c,onChange:e=>u(e.target.value),placeholder:"e.g., Inglewood, CA",className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),(0,t.jsx)("input",{type:"date",id:"date",value:m,onChange:e=>x(e.target.value),className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"targetPrice",className:"block text-sm font-medium text-gray-300 mb-1",children:"Target Price ($)"}),(0,t.jsx)("input",{type:"number",id:"targetPrice",value:h,onChange:e=>g(e.target.value),placeholder:"e.g., 350",min:"0",className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"numTickets",className:"block text-sm font-medium text-gray-300 mb-1",children:"Number of Tickets"}),(0,t.jsx)("input",{type:"number",id:"numTickets",value:p,onChange:e=>b(e.target.value),min:"1",className:"w-full bg-gray-900/50 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-purple-500 focus:border-purple-500 transition"})]}),w&&(0,t.jsx)("p",{className:"text-red-400 md:col-span-2 text-sm text-center bg-red-900/20 py-2 px-4 rounded-md border border-red-500/30",children:w}),(0,t.jsxs)("div",{className:"md:col-span-2 flex justify-end items-center gap-4 mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"text-gray-400 hover:text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",disabled:y,className:"flex justify-center items-center gap-2 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-900 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-all duration-300",children:[y?(0,t.jsx)(s,{}):(0,t.jsx)(a,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:y?"Adding...":"Add Watch"})]})]})]})]})},n=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M21.5 2v6h-6"}),(0,t.jsx)("path",{d:"M2.5 22v-6h6"}),(0,t.jsx)("path",{d:"M22 11.5A10 10 0 0 0 3.5 12.5"}),(0,t.jsx)("path",{d:"M2 12.5a10 10 0 0 0 18.5-1"})]}),o=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,t.jsx)("path",{d:"M3 6h18"}),(0,t.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),i={watching:{label:"Watching",bgColor:"bg-blue-900/50 border-blue-700",textColor:"text-blue-300",dotColor:"bg-blue-400",message:"Price is above your target. We're keeping an eye on it."},alert:{label:"Price Alert!",bgColor:"bg-green-900/50 border-green-700",textColor:"text-green-300",dotColor:"bg-green-400 animate-pulse",message:"Price is at or below your target! Now might be a good time to buy."},error:{label:"Error",bgColor:"bg-red-900/50 border-red-700",textColor:"text-red-300",dotColor:"bg-red-400",message:"There was an error checking the price. Please try again."}},d=({watch:e,onRefresh:r,onDelete:a,isRefreshing:l})=>{let{eventName:d,venueName:c,venueLocation:u,date:m,targetPrice:x,numTickets:h,currentPrice:g,broker:p,status:b,lastChecked:y}=e,f=i[b],w=(e=>{try{return new Date(e).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(t){return console.error("Error formatting date:",t),e}})(m),v=(e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(e){return console.error("Error formatting last checked date:",e),"Unknown"}})(y),j=g-x,N=j<=0;return(0,t.jsxs)("div",{className:`flex flex-col rounded-2xl border p-5 transition-shadow hover:shadow-lg hover:shadow-purple-900/20 ${f.bgColor}`,children:[(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:d}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:[c,", ",u]}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:w})]}),(0,t.jsxs)("div",{className:`flex items-center gap-2 text-sm font-medium py-1 px-3 rounded-full ${f.bgColor} ${f.textColor}`,children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${f.dotColor}`}),f.label]})]}),(0,t.jsxs)("div",{className:"my-4 grid grid-cols-2 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"bg-gray-800/50 p-3 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Current Price"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-white",children:["$",g.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["via ",p]})]}),(0,t.jsxs)("div",{className:"bg-gray-800/50 p-3 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 uppercase font-semibold",children:"Target Price"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-400",children:["$",x.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["for ",h," ticket",h>1?"s":""]})]})]}),(0,t.jsx)("div",{className:`p-3 rounded-lg text-center text-sm mb-4 ${N?"bg-green-900/30 text-green-300":"bg-red-900/30 text-red-300"}`,children:N?`Price is $${Math.abs(j).toFixed(2)} below your target!`:`Price is $${j.toFixed(2)} above your target.`}),(0,t.jsx)("p",{className:"text-xs text-center text-gray-500 italic mb-4",children:f.message})]}),(0,t.jsx)("div",{className:"border-t border-gray-700 pt-4 mt-auto",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Last checked: ",v]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>r(e.id),disabled:l,className:"p-2 rounded-full text-gray-400 hover:bg-gray-700 hover:text-white disabled:text-gray-600 disabled:cursor-not-allowed transition-colors","aria-label":"Refresh price",children:l?(0,t.jsx)(s,{className:"w-4 h-4"}):(0,t.jsx)(n,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>a(e.id),className:"p-2 rounded-full text-gray-400 hover:bg-red-800/50 hover:text-red-300 transition-colors","aria-label":"Delete watch",children:(0,t.jsx)(o,{className:"w-4 h-4"})})]})]})})]})},c=["SeatGeek","Ticketmaster","StubHub","Vivid Seats"],u=async e=>(await new Promise(e=>setTimeout(e,500)),{currentPrice:Math.round(e.targetPrice*(1.2+.3*Math.random())*100)/100,broker:c[Math.floor(Math.random()*c.length)]}),m=async e=>{var t,r;return await new Promise(e=>setTimeout(e,500)),{currentPrice:(t=e.targetPrice,r=e.currentPrice,.25>Math.random()?Math.round(t*(1-.15*Math.random())*100)/100:Math.max(1.05*t,Math.round(r*(1+(Math.random()-.5)*.2)*100)/100)),broker:.3>Math.random()?c[Math.floor(Math.random()*c.length)]:e.broker}},x=new class{async createWatch(e){return await u(e)}async updateWatchPrice(e){return await m(e)}},h=()=>(0,t.jsxs)("div",{className:"my-10 max-w-4xl mx-auto grid md:grid-cols-3 gap-6 text-center",children:[(0,t.jsxs)("div",{className:"bg-gray-800/40 p-6 rounded-xl border border-gray-700/50",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-purple-300 mb-2",children:"Set Your Watch"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Tells you to add an event and your target price."})]}),(0,t.jsxs)("div",{className:"bg-gray-800/40 p-6 rounded-xl border border-gray-700/50",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-purple-300 mb-2",children:"We Scan the Market"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Explains that the app will check prices for you."})]}),(0,t.jsxs)("div",{className:"bg-gray-800/40 p-6 rounded-xl border border-gray-700/50",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-purple-300 mb-2",children:"Get the Price Alert"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Describes the email notification you'll receive."})]})]}),g=({isOpen:e,onClose:r,onConfirm:a,title:s,children:l})=>e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:r,children:(0,t.jsxs)("div",{className:"relative max-w-md w-full mx-auto bg-gray-800 p-6 sm:p-8 rounded-2xl border border-gray-700 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:s}),(0,t.jsx)("div",{className:"text-gray-300 mb-6",children:l}),(0,t.jsxs)("div",{className:"flex justify-end items-center gap-4",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:a,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Confirm"})]})]})}):null,p="ticketWatches";function b(){let[e,s]=(0,r.useState)(()=>{try{let e=localStorage.getItem(p);if(!e)return[];let t=JSON.parse(e);if(!Array.isArray(t))return console.warn("Invalid data format in localStorage, resetting..."),localStorage.removeItem(p),[];return t}catch(e){console.error("Failed to load watches from localStorage:",e);try{localStorage.removeItem(p)}catch(e){console.error("Failed to clear corrupted localStorage:",e)}return[]}}),[n,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(new Set),[u,m]=(0,r.useState)(null),[b,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{(e=>{try{return localStorage.setItem(p,JSON.stringify(e)),!0}catch(e){return console.error("Failed to save watches to localStorage:",e),e instanceof DOMException&&"QuotaExceededError"===e.name&&console.error("localStorage quota exceeded. Consider using IndexedDB for larger datasets."),!1}})(e)||(y("Failed to save watches to storage. Your data may not persist."),setTimeout(()=>y(null),5e3))},[e]);let f=async e=>{try{y(null);let{currentPrice:t,broker:r}=await x.createWatch(e),a={...e,id:crypto.randomUUID(),currentPrice:t,broker:r,status:t<=e.targetPrice?"alert":"watching",lastChecked:new Date().toISOString()};s(e=>[a,...e]),o(!1)}catch(e){throw y(e instanceof Error?e.message:"Failed to create watch. Please try again."),console.error("Error adding watch:",e),e}},w=async t=>{let r=e.find(e=>e.id===t);if(r){c(e=>new Set(e).add(t));try{let{currentPrice:e,broker:a}=await x.updateWatchPrice(r);s(r=>r.map(r=>r.id===t?{...r,currentPrice:e,broker:a,status:e<=r.targetPrice?"alert":"watching",lastChecked:new Date().toISOString()}:r))}catch(e){console.error("Failed to refresh watch:",e),s(e=>e.map(e=>e.id===t?{...e,status:"error",lastChecked:new Date().toISOString()}:e))}finally{c(e=>{let r=new Set(e);return r.delete(t),r})}}};return(0,t.jsxs)("div",{className:"bg-gray-900 text-white min-h-screen font-sans",children:[(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 mb-2",children:"Vibey Tickets"}),(0,t.jsx)("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Never miss a price drop. Set your target price for any event, and let our AI-powered watcher alert you when it's time to buy."}),b&&(0,t.jsx)("div",{className:"mt-4 max-w-2xl mx-auto bg-red-900/20 border border-red-500/30 text-red-300 px-4 py-2 rounded-md text-sm",children:b})]}),(0,t.jsx)("div",{className:"text-center mb-10",children:(0,t.jsxs)("button",{onClick:()=>o(!0),className:"flex mx-auto items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105",children:[(0,t.jsx)(a,{className:"w-5 h-5"}),"Add New Watch"]})}),0===e.length?(0,t.jsx)(h,{}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsx)(d,{watch:e,onRefresh:w,onDelete:()=>{m(e)},isRefreshing:i.has(e.id)},e.id))})]}),n&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:(0,t.jsx)(l,{onAddWatch:f,onClose:()=>o(!1)})}),u&&(0,t.jsxs)(g,{isOpen:!!u,onClose:()=>{m(null)},onConfirm:()=>{u&&(s(e=>e.filter(e=>e.id!==u.id)),m(null))},title:"Delete Watch",children:["Are you sure you want to delete the watch for ",(0,t.jsx)("span",{className:"font-bold",children:u.eventName}),"? This action cannot be undone."]})]})}e.s(["default",()=>b],31713)}]);